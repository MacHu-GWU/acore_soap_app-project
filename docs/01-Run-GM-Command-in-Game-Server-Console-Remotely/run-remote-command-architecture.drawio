<mxfile host="Electron" modified="2023-06-21T14:59:58.741Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.2.8 Chrome/112.0.5615.165 Electron/24.2.0 Safari/537.36" etag="0uP8ymn7DFAlPMTGOIev" version="21.2.8" type="device">
  <diagram name="Page-1" id="F96DGvVeYkpt4g7TZ8Yj">
    <mxGraphModel dx="908" dy="560" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-1" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.ec2;" parent="1" vertex="1">
          <mxGeometry x="320" y="120" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="0E3Dfx_ekig_7F8kv5tf-2" target="0E3Dfx_ekig_7F8kv5tf-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-2" value="acore_soap_app &#xa;CLI tool" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/svg+xml,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDhweCIgd2lkdGg9IjQ4cHgiIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZD0iTTI0LjA0Nyw1Yy0xLjU1NSwwLjAwNS0yLjYzMywwLjE0Mi0zLjkzNiwwLjM2N2MtMy44NDgsMC42Ny00LjU0OSwyLjA3Ny00LjU0OSw0LjY3VjE0aDl2MkgxNS4yMmgtNC4zNWMtMi42MzYsMC00Ljk0MywxLjI0Mi01LjY3NCw0LjIxOWMtMC44MjYsMy40MTctMC44NjMsNS41NTcsMCw5LjEyNUM1Ljg1MSwzMi4wMDUsNy4yOTQsMzQsOS45MzEsMzRoMy42MzJ2LTUuMTA0YzAtMi45NjYsMi42ODYtNS44OTYsNS43NjQtNS44OTZoNy4yMzZjMi41MjMsMCw1LTEuODYyLDUtNC4zNzd2LTguNTg2YzAtMi40MzktMS43NTktNC4yNjMtNC4yMTgtNC42NzJDMjcuNDA2LDUuMzU5LDI1LjU4OSw0Ljk5NCwyNC4wNDcsNXogTTE5LjA2Myw5YzAuODIxLDAsMS41LDAuNjc3LDEuNSwxLjUwMmMwLDAuODMzLTAuNjc5LDEuNDk4LTEuNSwxLjQ5OGMtMC44MzcsMC0xLjUtMC42NjQtMS41LTEuNDk4QzE3LjU2Myw5LjY4LDE4LjIyNiw5LDE5LjA2Myw5eiIgZmlsbD0iIzAyNzdCRCIvPjxwYXRoIGQ9Ik0yMy4wNzgsNDNjMS41NTUtMC4wMDUsMi42MzMtMC4xNDIsMy45MzYtMC4zNjdjMy44NDgtMC42Nyw0LjU0OS0yLjA3Nyw0LjU0OS00LjY3VjM0aC05di0yaDkuMzQzaDQuMzVjMi42MzYsMCw0Ljk0My0xLjI0Miw1LjY3NC00LjIxOWMwLjgyNi0zLjQxNywwLjg2My01LjU1NywwLTkuMTI1QzQxLjI3NCwxNS45OTUsMzkuODMxLDE0LDM3LjE5NCwxNGgtMy42MzJ2NS4xMDRjMCwyLjk2Ni0yLjY4Niw1Ljg5Ni01Ljc2NCw1Ljg5NmgtNy4yMzZjLTIuNTIzLDAtNSwxLjg2Mi01LDQuMzc3djguNTg2YzAsMi40MzksMS43NTksNC4yNjMsNC4yMTgsNC42NzJDMTkuNzE5LDQyLjY0MSwyMS41MzYsNDMuMDA2LDIzLjA3OCw0M3ogTTI4LjA2MywzOWMtMC44MjEsMC0xLjUtMC42NzctMS41LTEuNTAyYzAtMC44MzMsMC42NzktMS40OTgsMS41LTEuNDk4YzAuODM3LDAsMS41LDAuNjY0LDEuNSwxLjQ5OEMyOS41NjMsMzguMzIsMjguODk5LDM5LDI4LjA2MywzOXoiIGZpbGw9IiNGRkMxMDciLz48L3N2Zz4=;" parent="1" vertex="1">
          <mxGeometry x="480" y="200" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="0E3Dfx_ekig_7F8kv5tf-3" target="0E3Dfx_ekig_7F8kv5tf-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-3" value="Worldserver&#xa;Console" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAS1BMVEUAAADP19vO19wmMjjP2NwY//+uvcSUp7CSpq8Z6uohfIAlQUYmMzkY/Pwa4uMb0tMjU1gY8vMb1NUcyMocxMUdtLYep6kgjpImNz1l7poZAAAAA3RSTlMAyshe3LGYAAAAeElEQVRIx+3UyQqAIBCA4RbHPbO993/SMEKoizNEy8EfBk8foohFDl/JklUnwBBdAJc8DB4IKcIQdhA8DBrEngN1ogz+DQZPBNBMhgRagG5ZCcBqBeBIhzYOgLpDTzuD0pZ0S7PZ11gCjP6Asc+fRga3wCufcQ7dBqhDEpCvkueLAAAAAElFTkSuQmCC;" parent="1" vertex="1">
          <mxGeometry x="680" y="200" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-5" value="Soap Request" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAV1BMVEUAAABMtaxNtqwAaVzg8vEXgHQ0npMwmo8chXnP6+lhvrUZg3YGb2IFbmFLtatErqMfiX0Ca14slYoIcmVBq6A3oJUljoMTfG8MdWhJs6g8pZsokoZfvbSh7RajAAAAAnRSTlMAiJXwxioAAADJSURBVEjH7dLLDoIwEIVhnSO02jug4OX9n1OnwkpInR0k/Iumi/maNulhxdFsRyF4sZCA84WFAJxYiEAWIpCFCGQhAlmIQBYikIUEZFEAP+1gxeDpKvKtu5J29k7UuM9WubgMQkKnMBBVQD2uCnoZUMSth8qjkbwrg5AsWs/ADvSALQLSQEMMDMITpgzMBBqovtdF0GG60rXV6Wb+efTncAZ1THhUJRASQo3BM6hh6QtaY0yYBxEVeQvFk/ekR8B1m/l8O9giWE9vuc8QsYFxk4sAAAAASUVORK5CYII=;" parent="1" vertex="1">
          <mxGeometry x="600" y="140" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-7" value="Soap Response" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAV1BMVEUAAABMtaxNtqwAaVzg8vEXgHQ0npMwmo8chXnP6+lhvrUZg3YGb2IFbmFLtatErqMfiX0Ca14slYoIcmVBq6A3oJUljoMTfG8MdWhJs6g8pZsokoZfvbSh7RajAAAAAnRSTlMAiJXwxioAAADJSURBVEjH7dLLDoIwEIVhnSO02jug4OX9n1OnwkpInR0k/Iumi/maNulhxdFsRyF4sZCA84WFAJxYiEAWIpCFCGQhAlmIQBYikIUEZFEAP+1gxeDpKvKtu5J29k7UuM9WubgMQkKnMBBVQD2uCnoZUMSth8qjkbwrg5AsWs/ADvSALQLSQEMMDMITpgzMBBqovtdF0GG60rXV6Wb+efTncAZ1THhUJRASQo3BM6hh6QtaY0yYBxEVeQvFk/ekR8B1m/l8O9giWE9vuc8QsYFxk4sAAAAASUVORK5CYII=;" parent="1" vertex="1">
          <mxGeometry x="600" y="280" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="0E3Dfx_ekig_7F8kv5tf-10" target="0E3Dfx_ekig_7F8kv5tf-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-10" value="System Manager &lt;br&gt;Agent" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#B0084D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;pointerEvents=1;shape=mxgraph.aws4.run_command;" parent="1" vertex="1">
          <mxGeometry x="360" y="200" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-17" value="EC2 Instance (Game Server)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="320" y="120.5" width="520" height="239" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-24" value="call api" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="0E3Dfx_ekig_7F8kv5tf-18" target="0E3Dfx_ekig_7F8kv5tf-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-18" value="External&#xa;App" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/svg+xml,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDhweCIgd2lkdGg9IjQ4cHgiIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZD0iTTI0LjA0Nyw1Yy0xLjU1NSwwLjAwNS0yLjYzMywwLjE0Mi0zLjkzNiwwLjM2N2MtMy44NDgsMC42Ny00LjU0OSwyLjA3Ny00LjU0OSw0LjY3VjE0aDl2MkgxNS4yMmgtNC4zNWMtMi42MzYsMC00Ljk0MywxLjI0Mi01LjY3NCw0LjIxOWMtMC44MjYsMy40MTctMC44NjMsNS41NTcsMCw5LjEyNUM1Ljg1MSwzMi4wMDUsNy4yOTQsMzQsOS45MzEsMzRoMy42MzJ2LTUuMTA0YzAtMi45NjYsMi42ODYtNS44OTYsNS43NjQtNS44OTZoNy4yMzZjMi41MjMsMCw1LTEuODYyLDUtNC4zNzd2LTguNTg2YzAtMi40MzktMS43NTktNC4yNjMtNC4yMTgtNC42NzJDMjcuNDA2LDUuMzU5LDI1LjU4OSw0Ljk5NCwyNC4wNDcsNXogTTE5LjA2Myw5YzAuODIxLDAsMS41LDAuNjc3LDEuNSwxLjUwMmMwLDAuODMzLTAuNjc5LDEuNDk4LTEuNSwxLjQ5OGMtMC44MzcsMC0xLjUtMC42NjQtMS41LTEuNDk4QzE3LjU2Myw5LjY4LDE4LjIyNiw5LDE5LjA2Myw5eiIgZmlsbD0iIzAyNzdCRCIvPjxwYXRoIGQ9Ik0yMy4wNzgsNDNjMS41NTUtMC4wMDUsMi42MzMtMC4xNDIsMy45MzYtMC4zNjdjMy44NDgtMC42Nyw0LjU0OS0yLjA3Nyw0LjU0OS00LjY3VjM0aC05di0yaDkuMzQzaDQuMzVjMi42MzYsMCw0Ljk0My0xLjI0Miw1LjY3NC00LjIxOWMwLjgyNi0zLjQxNywwLjg2My01LjU1NywwLTkuMTI1QzQxLjI3NCwxNS45OTUsMzkuODMxLDE0LDM3LjE5NCwxNGgtMy42MzJ2NS4xMDRjMCwyLjk2Ni0yLjY4Niw1Ljg5Ni01Ljc2NCw1Ljg5NmgtNy4yMzZjLTIuNTIzLDAtNSwxLjg2Mi01LDQuMzc3djguNTg2YzAsMi40MzksMS43NTksNC4yNjMsNC4yMTgsNC42NzJDMTkuNzE5LDQyLjY0MSwyMS41MzYsNDMuMDA2LDIzLjA3OCw0M3ogTTI4LjA2MywzOWMtMC44MjEsMC0xLjUtMC42NzctMS41LTEuNTAyYzAtMC44MzMsMC42NzktMS40OTgsMS41LTEuNDk4YzAuODM3LDAsMS41LDAuNjY0LDEuNSwxLjQ5OEMyOS41NjMsMzguMzIsMjguODk5LDM5LDI4LjA2MywzOXoiIGZpbGw9IiNGRkMxMDciLz48L3N2Zz4=;" parent="1" vertex="1">
          <mxGeometry x="40" y="200" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-23" value="run &lt;br&gt;command" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;startArrow=classic;startFill=1;" parent="1" source="0E3Dfx_ekig_7F8kv5tf-19" target="0E3Dfx_ekig_7F8kv5tf-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-25" value="get result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="0E3Dfx_ekig_7F8kv5tf-19" target="0E3Dfx_ekig_7F8kv5tf-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-19" value="System Manager&lt;br&gt;Run Command Service" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F34482;gradientDirection=north;fillColor=#BC1356;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.systems_manager;" parent="1" vertex="1">
          <mxGeometry x="200" y="200" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-26" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="110" y="190" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-27" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="270" y="190" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-28" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="430" y="190" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-29" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="550" y="190" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-30" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="740" y="190" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-31" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="550" y="270" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-32" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="430" y="270" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-33" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="270" y="270" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-34" value="9" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="110" y="270" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-35" value="Run GM command remotely" style="text;html=1;strokeColor=default;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="800" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0E3Dfx_ekig_7F8kv5tf-36" value="&lt;h1&gt;发送 GM 命令并获得结果的数据流动过程&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;任意有 AWS SSM Run Command 权限的运算环境调用 SSM 的 API, 将需要运行的 GM 命令用 acore_soap_app 封装一层, 然后发送出去. 封装的意思是加入你原本想要执行的命令是 &#39;&lt;font face=&quot;Courier New&quot;&gt;server info&#39;&lt;/font&gt;, 那么最终要执行的命令则应该是 &#39;&lt;font face=&quot;Courier New&quot;&gt;/path/to/cli &quot;server info&quot;&#39;.&lt;/font&gt; 这个运算环境可以是开发者电脑, 可以是服务器官网的 Web App, 也可以是 Lambda 微服务.&lt;/li&gt;&lt;li&gt;SSM Run Command 服务将命令发给位于 EC2 上的 System Manager Agent.&lt;/li&gt;&lt;li&gt;System Manager Agent 将收到的命令发给 CLI 程序.&lt;/li&gt;&lt;li&gt;CLI 程序收到命后将其封装为 Soap Request XML, 然后通过 localhost:7878 发送给 Worldserver Console.&lt;/li&gt;&lt;li&gt;Worldserver Console 将执行结果以 Soap Response XML 的形式返回给 CLI 程序.&lt;/li&gt;&lt;li&gt;CLI 程序解析 XML 结果, 提取重要数据并检测命令是否成功运行. 然后将所有数据封装为 JSON 返回给 System Manager.&lt;/li&gt;&lt;li&gt;System Manager 捕获了 CLI 的 return code (0 表示成功, 其他则表示失败) 和 JSON 结果 (如果成功的话), 然后将其返回给 SSM Run Command 服务.&lt;/li&gt;&lt;li&gt;SSM Run Command 收到执行结果, 此时你既可以在 AWS Console 里查看结果, 也可以用 API 获得这个结果.&lt;/li&gt;&lt;li&gt;发送命令的程序在发送完命令后就用 Long polling, 每几秒就调用 AWS SSM API 看看运行是否结束, 如果结束了就提取这个 JSON 结果.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=default;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="680" width="800" height="240" as="geometry" />
        </mxCell>
        <mxCell id="VJXMJI3i0_3cBdg6p75p-1" value="&lt;h1&gt;架构设计&lt;/h1&gt;&lt;div&gt;在上面的架构中最为重要的就是 acore_soap_app CLI tool (#4, #6). 它也就是本项目. 在游戏服务器的 EC2 上安装本项目后就得到了一个 CLI 程序, 可以跟跟 worldserver Console 进行交互, 发送 GM 命令等. 等于是将原本需要在 EC2 上运行的 HTTP request 封装成了命令行, 并且能将 SOAP XML Response 解析成更加友好的 JSON. 这个 CLI tool 我们称之为 SOAP Agent, 能够代理外部程序运行 GM 命令的请求.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;AWS System Manager&amp;nbsp;&lt;span style=&quot;color: rgb(35, 47, 62); text-align: center;&quot;&gt;Run Command Service (&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;#2 #8)&amp;nbsp;&lt;/span&gt;是一个 AWS 服务, 运行我们安全地在 EC2 上远程执行任何命令行程序. 通过这个服务, 我们可以安全地远程调用 SOAP Agent.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;本项目还提供了一系列 SDK, 它对通过 Run Command Service 远程执行 CLI 的业务逻辑进行了封装, 并且做出了很多优化, 例如利用 AWS S3 储存输入和输出结果, 以应对批量执行大量命令的情况, 还例如非常高级的异常处理. 基于这套 SDK, 开发者可以很容易地开发出远程执行 GM 命令的应用程序, 将其嵌入到魔兽世界服务器管理后台中.&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=default;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="400" width="800" height="240" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
